@startuml modelo_conceptual_mer
skinparam backgroundColor #FFFFFE
skinparam entity {
    BackgroundColor #FFE6CC
    BorderColor #FF8C00
}
skinparam note {
    BackgroundColor #FFF2CC
    BorderColor #D6B656
}

title Modelo Entidad-Relación (MER) - Plataforma de Barberías

' === ENTIDADES FUERTES ===
entity Usuario {
    email
    contraseña
    rol
}

entity Cliente {
    nombre_completo
    email
    telefono
    preferencias
}

entity AdministradorBarberia {
    nombre_completo
    email
    telefono
    nivel_acceso
}

entity PersonalBarbero {
    nombre_completo
    email
    telefono
    dni
    especialidad
    experiencia
}

entity Barberia {
    nombre
    descripcion
    ubicacion
    horarios
    contacto
}

entity Servicio {
    nombre
    descripcion
    duracion
    categoria
}

entity Promocion {
    titulo
    descripcion
    descuento
    vigencia
}

' === ENTIDADES DÉBILES ===
entity Barbero {
    codigo_empleado
    fecha_ingreso
    estado_laboral
}
note right of Barbero
  Entidad débil: depende
  de PersonalBarbero y Barberia
end note

entity Reserva {
    fecha_hora
    estado
    notas
    precio
}
note right of Reserva
  Entidad débil: depende
  de Cliente y AsignacionServicio
end note

entity Calificacion {
    puntuacion_servicio
    puntuacion_barbero
    puntuacion_barberia
    comentario
    fecha
}
note right of Calificacion
  Entidad débil: depende
  completamente de Reserva
end note

entity HorarioDisponibilidad {
    dia_semana
    hora_inicio
    hora_fin
    disponible
}
note right of HorarioDisponibilidad
  Entidad débil: depende
  de Barbero
end note

entity PrecioServicio {
    precio
    fecha_vigencia
}
note right of PrecioServicio
  Entidad débil: depende
  de Servicio
end note

entity Suscripcion {
    tipo_plan
    fecha_inicio
    fecha_fin
    monto
    estado
}
note right of Suscripcion
  Entidad débil: depende
  de Barberia
end note

' === RELACIONES ===
entity AsignacionServicio {
    fecha_asignacion
    estado_asignacion
}
note right of AsignacionServicio
  Entidad asociativa
  entre Barbero y Servicio
end note

' === RELACIONES BINARIAS ===
Usuario ||--o{ Cliente : "se_registra_como"
Usuario ||--o{ AdministradorBarberia : "se_registra_como"
Usuario ||--o{ PersonalBarbero : "se_registra_como"

AdministradorBarberia ||--o{ Barberia : "administra"

PersonalBarbero ||--o{ Barbero : "trabaja_como"
Barberia ||--o{ Barbero : "emplea"

Barberia ||--o{ Servicio : "ofrece"
Barberia ||--o{ Promocion : "publica"
Barberia ||--|| Suscripcion : "tiene"

Barbero ||--o{ HorarioDisponibilidad : "define"
Servicio ||--o{ PrecioServicio : "tiene"

' === RELACIÓN TERNARIA CLAVE ===
Barbero }o--o{ AsignacionServicio : "puede_realizar"
Servicio }o--o{ AsignacionServicio : "es_realizado_por"

Cliente ||--o{ Reserva : "solicita"
AsignacionServicio ||--o{ Reserva : "define_servicio"

Reserva ||--|| Calificacion : "genera"

note bottom
  **MODELO ENTIDAD-RELACIÓN (MER)**
  
  **Características del MER:**
  • Enfoque conceptual alto nivel
  • Entidades con atributos conceptuales
  • Relaciones semánticas claras
  • No especifica tipos de datos
  • No define llaves primarias/foráneas
  • Identifica entidades fuertes y débiles
  • Muestra cardinalidades conceptuales
  
  **Entidades Fuertes:** Tienen existencia independiente
  **Entidades Débiles:** Dependen de otras entidades
  **Relaciones:** Representan asociaciones conceptuales
end note

@enduml